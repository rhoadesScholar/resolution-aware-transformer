# Detection-specific configuration
# Inherits from unified template with detection-specific settings

# Experiment metadata
experiment_name: "rat_unified_detection"
description: "RAT for object detection with unified training framework"
task_type: "detection"

# Random seed for reproducibility
seed: 42

# Model configuration for detection
model:
  name: "rat"
  spatial_dims: 2
  input_features: 3
  feature_dims: 256  # Larger for detection
  num_blocks: 6      # More layers for detection
  num_heads: 16
  attention_type: "dense"
  multi_scale: true  # Multi-scale is often beneficial for detection
  scales: [800, 600, 400]
  learnable_rose: true
  mlp_ratio: 4
  mlp_dropout: 0.1
  
  # Detection-specific parameters
  num_classes: 80    # COCO classes
  num_queries: 100   # For DETR-style detection
  bbox_loss_coef: 5.0
  giou_loss_coef: 2.0
  class_loss_coef: 1.0
  focal_alpha: 0.25
  focal_gamma: 2.0

# Training configuration
training:
  epochs: 50  # Typically fewer epochs for detection
  
  # Auto batch size (detection models are typically larger)
  auto_batch_size: true
  target_batch_size: 16  # Smaller effective batch size for detection
  
  learning_rate: 1e-4
  weight_decay: 0.01
  scheduler: "step"  # Step scheduler often used for detection
  
  # Detection-specific loss is handled by the DetectionLoss class
  grad_clip: 1.0
  mixed_precision: true
  deepspeed: true
  zero_stage: 2
  use_accelerate: true
  save_freq: 5

# Data configuration for COCO
data:
  data_dir: "/path/to/COCO"  # Update this path
  dataset_name: "coco"
  
  image_size: 800  # Common size for detection
  train_split: "train2017"
  val_split: "val2017"
  
  auto_optimize: true

# Logging and experiment tracking
logging:
  backend: "tensorboard"
  log_dir: "results/tensorboard_logs"
  use_mlflow: true
  mlflow_experiment_name: "rat_detection_experiments"

# Evaluation configuration
eval:
  eval_interval: 2  # Evaluate every 2 epochs
  save_predictions: true

# Distributed training
distributed:
  auto_detect: true
  backend: "nccl"

# Debug mode
debug: false